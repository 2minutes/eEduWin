webpackJsonp([19],{"2/R2":function(e,t){},iFNM:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("//Fk"),r=a.n(i),n=a("l/JR"),l=(a("mtWM"),a("w24O"),a("+EMp")),s=(a("jvWE"),a("2vhu")),o=[{title:"活动编号",dataIndex:"activityNo",key:"activityNo"},{title:"中文名称",dataIndex:"activityNmZh",key:"activityNmZh"},{title:"英文名称",dataIndex:"activityNmEn",key:"activityNmEn"},{title:"活动类型",key:"activityTpStr",dataIndex:"activityTpStr"},{title:"报名截止时间",key:"submitEndTs",dataIndex:"submitEndTs"},{title:"报名人要求（中文）",key:"attenderGradleZh",dataIndex:"attenderGradleZh"},{title:"报名人要求（英文）",key:"attenderGradleEn",dataIndex:"attenderGradleEn"},{title:"竞赛主题（中文）",key:"activityThemeZh",dataIndex:"activityThemeZh"},{title:"竞赛主题（中文）",key:"activityThemeEn",dataIndex:"activityThemeEn"},{title:"竞赛奖励（中文）",key:"prizeZh",dataIndex:"prizeZh"},{title:"竞赛奖励（英文）",key:"prizeEn",dataIndex:"prizeEn"},{title:"操作",key:"action",scopedSlots:{customRender:"tags"}}],c={data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"news"}),list:[],file:null,editRow:{},tableHeader:o,addVisible:!1,previewVisible:!1,previewImgUrl:"",activityTp:null}},created:function(){this.initData()},methods:{initData:function(){var e=this;Object(n.a)({url:"activity/query",params:{activityTp:null}}).then(function(t){console.log("activity:",t);var a=t.activities?t.activities:[],i=t.competitions?t.competitions:[],r=t.hisActivitys?t.hisActivitys:[],n=a.concat(i,r);n=n.map(function(e){return e.key=e.activityNo,e.activityTpStr=1==e.activityTp?"志愿者活动":"竞赛",e}),e.list=n})},detail:function(e){this.$router.push({path:"/curd/activityDetail",query:{ano:e.activityNo}})},edit:function(e){this.editRow=e,this.addVisible=!0,this.activityTp=e.activityTp},del:function(e){var t=this;s.a.confirm({title:"确认删除?",content:"删除后数据不可恢复!",cancelText:"取消",okText:"确认",onOk:function(){return new r.a(function(a,i){Object(n.a)({url:"activity/delete",params:{activityNo:e.activityNo}}).then(function(e){200==e.code&&(t.$message.success("删除成功!"),t.initData()),a()})}).catch(function(){return console.log("Oops errors!")})},onCancel:function(){}})},showAddModal:function(){this.addVisible=!0},handleChange:function(e){this.file=e.target.files[0]},handleCancel:function(){this.addVisible=!1,this.editRow={},this.form.resetFields(),this.file=null},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.file;a&&a.size>1048576?this.$message.error("图片过大，请选择小于1M的图片!"):this.form.validateFields(function(e,i){if(!e){var r=t.getFormParams(i);t.file&&r.append("file",a);var l="activity/add",s="新增成功!";t.editRow.activityNo&&(l="activity/update",r.append("activityNo",t.editRow.activityNo),s="修改成功!"),Object(n.a)({method:"post",url:l,params:r}).then(function(e){console.log("竞赛：",e),200==e.code&&(t.$message.success(s),t.initData(),t.handleCancel())})}})},getFormParams:function(e){var t=new FormData;for(var a in e)t.append(a,e[a]);return t},handlePreview:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.previewImgUrl=e,this.previewVisible=!!e},handleTypeChange:function(e){this.activityTp=e}},components:{Menu:l.a}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"curd clearfix"},[a("Menu"),e._v(" "),a("div",{staticClass:"curd_right"},[a("a-button",{attrs:{type:"primary"},on:{click:e.showAddModal}},[e._v("\n            新增活动\n        ")]),e._v(" "),a("a-table",{attrs:{columns:e.tableHeader,"data-source":e.list},scopedSlots:e._u([{key:"name",fn:function(t){return a("a",{},[e._v(e._s(t))])}},{key:"tags",fn:function(t){return a("span",{},[a("a-tag",{attrs:{color:"red"},on:{click:function(a){return e.detail(t)}}},[e._v("活动描述")]),e._v(" "),a("a-tag",{attrs:{color:"green"},on:{click:function(a){return e.edit(t)}}},[e._v("修改")]),e._v(" "),a("a-tag",{attrs:{color:"red"},on:{click:function(a){return e.del(t)}}},[e._v("删除")])],1)}}])},[e._v(" "),a("span",{attrs:{slot:"customTitle"},slot:"customTitle"},[e._v("Name")])])],1),e._v(" "),a("a-modal",{attrs:{title:(e.editRow.activityNo?"修改":"新增")+"活动",visible:e.addVisible,footer:null,width:1e3},on:{cancel:e.handleCancel}},[a("a-form",{attrs:{form:e.form,"label-col":{span:5},"wrapper-col":{span:12}},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"活动名称（中文）"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["activityNmZh",{rules:[{required:!0,message:"请输入活动名称（中文）"}],initialValue:e.editRow.activityNmZh}],expression:"[\n                        'activityNmZh',\n                        { \n                            rules: [{ required: true, message: '请输入活动名称（中文）' }],\n                            initialValue: editRow.activityNmZh \n                        },\n                    ]"}]})],1),e._v(" "),a("a-form-item",{attrs:{label:"活动名称（英文）"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["activityNmEn",{rules:[{required:!0,message:"活动名称（英文）"}],initialValue:e.editRow.activityNmEn}],expression:"[\n                        'activityNmEn',\n                        { \n                            rules: [{ required: true, message: '活动名称（英文）' }],\n                            initialValue: editRow.activityNmEn \n                        },\n                    ]"}]})],1),e._v(" "),a("a-form-item",{attrs:{label:"报名截止时间"}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["submitEndTs",{rules:[{required:!0,message:"请选择报名截止时间"}],initialValue:e.editRow.submitEndTs}],expression:"[\n                        'submitEndTs',\n                        { \n                            rules: [{ required: true, message: '请选择报名截止时间' }],\n                            initialValue: editRow.submitEndTs\n                        },\n                    ]"}],attrs:{placeholder:"报名截止时间","show-time":"",allowClear:!0,format:"yyyy-MM-DD HH:mm:ss",valueFormat:"yyyy-MM-DD HH:mm:ss"}})],1),e._v(" "),a("a-form-item",{attrs:{label:"活动类型"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["activityTp",{rules:[{required:!0,message:"请选择活动类型"}],initialValue:e.editRow.activityTp}],expression:"[\n                        'activityTp',\n                        { \n                            rules: [{ required: true, message: '请选择活动类型' }],\n                            initialValue: editRow.activityTp \n                        },\n                    ]"}],on:{change:e.handleTypeChange}},[a("a-select-option",{attrs:{value:"0"}},[e._v("\n                        竞赛\n                    ")]),e._v(" "),a("a-select-option",{attrs:{value:"1"}},[e._v("\n                        志愿者活动\n                    ")])],1)],1),e._v(" "),a("a-form-item",{attrs:{required:"",label:"活动图片"}},[e.editRow.activityLogo?a("img",{staticClass:"pic",attrs:{src:e.editRow.activityLogo},on:{click:function(t){return e.handlePreview(e.editRow.activityLogo)}}}):e._e(),e._v(" "),a("input",{staticClass:"file_btn",attrs:{name:"file",type:"file",accept:"image/png,image/gif,image/jpeg"},on:{change:e.handleChange}})]),e._v(" "),"0"===e.activityTp?[a("a-form-item",{attrs:{label:"竞赛主题（中文）"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["activityThemeZh",{rules:[{required:!0,message:"请输入中文活动描述"}],initialValue:e.editRow.activityThemeZh}],expression:"[\n                            'activityThemeZh',\n                            { \n                                rules: [{ required: true, message: '请输入中文活动描述' }],\n                                initialValue: editRow.activityThemeZh\n                            },\n                        ]"}],attrs:{autoSize:{minRows:2,maxRows:6},allowClear:!0,placeholder:"500字以内"}})],1),e._v(" "),a("a-form-item",{attrs:{label:"竞赛主题（英文）"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["activityThemeEn",{rules:[{required:!0,message:"请输入英文活动描述"}],initialValue:e.editRow.activityThemeEn}],expression:"[\n                            'activityThemeEn',\n                            { \n                                rules: [{ required: true, message: '请输入英文活动描述' }],\n                                initialValue: editRow.activityThemeEn\n                            },\n                        ]"}],attrs:{autoSize:{minRows:2,maxRows:6},allowClear:!0,placeholder:"500字以内"}})],1),e._v(" "),a("a-form-item",{attrs:{label:"竞赛奖励（中文）"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["prizeZh",{rules:[{required:!0,message:"请输入中文活动奖励"}],initialValue:e.editRow.prizeZh}],expression:"[\n                            'prizeZh',\n                            { \n                                rules: [{ required: true, message: '请输入中文活动奖励' }],\n                                initialValue: editRow.prizeZh\n                            },\n                        ]"}],attrs:{autoSize:{minRows:2,maxRows:6},allowClear:!0,placeholder:"多条数据用#分隔,100字以内"}})],1),e._v(" "),a("a-form-item",{attrs:{label:"竞赛奖励（英文）"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["prizeEn",{rules:[{required:!0,message:"请输入英文活动奖励"}],initialValue:e.editRow.prizeEn}],expression:"[\n                            'prizeEn',\n                            { \n                                rules: [{ required: true, message: '请输入英文活动奖励' }],\n                                initialValue: editRow.prizeEn\n                            },\n                        ]"}],attrs:{autoSize:{minRows:2,maxRows:6},allowClear:!0,placeholder:"多条数据用#分隔,100字以内"}})],1)]:e._e(),e._v(" "),a("a-form-item",{attrs:{label:"参与者年龄段（中文）"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["attenderGradleZh",{rules:[{required:!0,message:"请输入参与者年龄段（中文）"}],initialValue:e.editRow.attenderGradleZh}],expression:"[\n                        'attenderGradleZh',\n                        { \n                            rules: [{ required: true, message: '请输入参与者年龄段（中文）' }],\n                            initialValue: editRow.attenderGradleZh\n                        },\n                    ]"}],attrs:{autoSize:{minRows:2,maxRows:6},allowClear:!0,placeholder:"多条数据用#分隔"}})],1),e._v(" "),a("a-form-item",{attrs:{label:"参与者年龄段（英文）"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["attenderGradleEn",{rules:[{required:!0,message:"请输入参与者年龄段（英文）"}],initialValue:e.editRow.attenderGradleEn}],expression:"[\n                        'attenderGradleEn',\n                        { \n                            rules: [{ required: true, message: '请输入参与者年龄段（英文）' }],\n                            initialValue: editRow.attenderGradleEn\n                        },\n                    ]"}],attrs:{autoSize:{minRows:2,maxRows:6},allowClear:!0,placeholder:"多条数据用#分隔"}})],1),e._v(" "),a("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[a("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v("\n                    "+e._s(e.editRow.activityNo?"修改":"新增")+"\n                ")])],1)],2)],1),e._v(" "),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:function(t){return e.handlePreview()}}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImgUrl}})])],1)},staticRenderFns:[]};var u=a("VU/8")(c,d,!1,function(e){a("2/R2")},null,null);t.default=u.exports}});