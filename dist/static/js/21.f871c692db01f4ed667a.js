webpackJsonp([21],{gjDk:function(e,t){},t1Tw:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("//Fk"),n=i.n(a),s=i("l/JR"),r=(i("mtWM"),i("w24O"),i("+EMp")),o=i("2vhu"),l=[{title:"描述标题（中）",dataIndex:"descTitleCn",key:"descTitleCn"},{title:"描述标题（英）",dataIndex:"descTitleEn",key:"descTitleEn"},{title:"描述（中）",key:"activityDescCn",dataIndex:"activityDescCn"},{title:"描述（英）",key:"activityDescEn",dataIndex:"activityDescEn"},{title:"操作",key:"action",scopedSlots:{customRender:"tags"}}],c={data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"course"}),headers:{authorization:"authorization-text"},detail:{},descList:[],activityNo:"",detailVisible:!1,editRow:{},tableHeader:l}},created:function(){var e=this.$route.query;e.ano&&(this.activityNo=e.ano,this.initData())},methods:{initData:function(){var e=this;Object(s.a)({url:"activity/query",params:{activityNo:this.activityNo}}).then(function(t){console.log("activity:",t);var i=t.activities.length?t.activities[0]:[],a=i.activityDescs?i.activityDescs:[];a=a.map(function(e){return e.key=e.showRank,e}),e.descList=a,e.detail=i})},edit:function(e){this.editRow=e,this.detailVisible=!0},del:function(e){var t=this;o.a.confirm({title:"确认删除?",content:"删除后数据不可恢复!",cancelText:"取消",okText:"确认",onOk:function(){return new n.a(function(i,a){Object(s.a)({url:"activity/deleteDesc",params:{id:e.id}}).then(function(e){200==e.code&&(t.$message.success("删除成功!"),t.initData()),i()})}).catch(function(){return console.log("Oops errors!")})},onCancel:function(){}})},showAddModal:function(){this.detailVisible=!0},closeDetail:function(){this.detailVisible=!1,this.editRow={},this.form.resetFields()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,i){if(console.log("valid:",e,i),!e){var a=i;a.activityNo=t.activityNo;var n="activity/addDesc",r="新增成功!";t.editRow.id&&(a.id=t.editRow.id,n="activity/updateDesc",r="修改成功!"),Object(s.a)({url:n,params:a}).then(function(e){console.log("add:",e),200==e.code&&(t.$message.success(r),t.detailVisible=!1,t.form.resetFields(),t.editRow={},t.initData())})}})},handleTypeChange:function(e){var t="",i="";switch(e){case"1":t="申请指南",i="Submission Guidance";break;case"2":t="活动时间段",i="Volunteer Duration";break;case"3":t="活动概述",i="Descriptions";break;case"4":t="报名方式",i="Sign Up Details"}this.form.setFieldsValue({descTitleCn:t,descTitleEn:i})}},components:{Menu:r.a},computed:{rankList:function(){return void 0==this.detail.activityTp?[]:1==this.detail.activityTp?[{label:"活动时间段",value:"2"},{label:"活动概述",value:"3"},{label:"报名方式",value:"4"}]:[{label:"申请指南",value:"1"}]}}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"curd clearfix"},[i("Menu"),e._v(" "),i("div",{staticClass:"curd_right"},[i("a-button",{attrs:{type:"primary"},on:{click:e.showAddModal}},[e._v("\n            新增描述\n        ")]),e._v(" "),i("a-table",{attrs:{columns:e.tableHeader,"data-source":e.descList},scopedSlots:e._u([{key:"name",fn:function(t){return i("a",{},[e._v(e._s(t))])}},{key:"tags",fn:function(t){return i("span",{},[i("a-tag",{attrs:{color:"green"},on:{click:function(i){return e.edit(t)}}},[e._v("修改")]),e._v(" "),i("a-tag",{attrs:{color:"red"},on:{click:function(i){return e.del(t)}}},[e._v("删除")])],1)}}])},[e._v(" "),i("span",{attrs:{slot:"customTitle"},slot:"customTitle"},[e._v("Name")])])],1),e._v(" "),i("a-modal",{attrs:{title:(e.editRow.id?"修改":"新增")+"活动介绍",visible:e.detailVisible,footer:null,width:800},on:{cancel:e.closeDetail}},[i("a-form",{attrs:{form:e.form,"label-col":{span:5},"wrapper-col":{span:12}},on:{submit:e.handleSubmit}},[i("a-form-item",{attrs:{label:"描述类型"}},[i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["showRank",{rules:[{required:!0,message:"请选择描述类型"}],initialValue:e.editRow.showRank}],expression:"[\n                        'showRank',\n                        { \n                            rules: [{ required: true, message: '请选择描述类型' }],\n                            initialValue: editRow.showRank \n                        },\n                    ]"}],on:{change:e.handleTypeChange}},e._l(e.rankList,function(t,a){return i("a-select-option",{key:a,attrs:{value:t.value}},[e._v("\n                        "+e._s(t.label)+"\n                    ")])}),1)],1),e._v(" "),i("a-form-item",{attrs:{label:"描述标题（中）"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["descTitleCn",{rules:[{required:!0,message:"请输入描述标题（中）"}],initialValue:e.editRow.descTitleCn}],expression:"[\n                        'descTitleCn',\n                        { \n                            rules: [{ required: true, message: '请输入描述标题（中）' }],\n                            initialValue: editRow.descTitleCn \n                        },\n                    ]"}],attrs:{disabled:!0}})],1),e._v(" "),i("a-form-item",{attrs:{label:"描述标题（英）"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["descTitleEn",{rules:[{required:!0,message:"请输入描述标题（英）"}],initialValue:e.editRow.descTitleEn}],expression:"[\n                        'descTitleEn',\n                        { \n                            rules: [{ required: true, message: '请输入描述标题（英）' }],\n                            initialValue: editRow.descTitleEn \n                        },\n                    ]"}],attrs:{disabled:!0}})],1),e._v(" "),i("a-form-item",{attrs:{label:"描述（中）"}},[i("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["activityDescCn",{rules:[{required:!0,message:"请输入描述（中）"}],initialValue:e.editRow.activityDescCn}],expression:"[\n                        'activityDescCn',\n                        { \n                            rules: [{ required: true, message: '请输入描述（中）' }],\n                            initialValue: editRow.activityDescCn \n                        },\n                    ]"}],attrs:{placeholder:"多条#号分隔",autoSize:{minRows:2,maxRows:6},allowClear:!0}})],1),e._v(" "),i("a-form-item",{attrs:{label:"描述（英）"}},[i("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["activityDescEn",{rules:[{required:!0,message:"请输入描述（英）"}],initialValue:e.editRow.activityDescEn}],expression:"[\n                        'activityDescEn',\n                        { \n                            rules: [{ required: true, message: '请输入描述（英）' }],\n                            initialValue: editRow.activityDescEn \n                        },\n                    ]"}],attrs:{placeholder:"多条#号分隔",autoSize:{minRows:2,maxRows:6},allowClear:!0}})],1),e._v(" "),i("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[i("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v("\n                    "+e._s(e.editRow.id?"修改":"新增")+"\n                ")])],1)],1)],1)],1)},staticRenderFns:[]};var u=i("VU/8")(c,d,!1,function(e){i("gjDk")},null,null);t.default=u.exports}});