webpackJsonp([15],{TOkC:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("//Fk"),a=i.n(n),o=i("l/JR"),r=(i("mtWM"),i("+EMp")),l=i("2vhu"),s=i("jvWE"),c=[{title:"通知编号",dataIndex:"id",key:"id"},{title:"中文标题",dataIndex:"noticeTitleZh",key:"noticeTitleZh"},{title:"英文标题",dataIndex:"noticeTitleEn",key:"noticeTitleEn"},{title:"中文内容",key:"noticeContentZh",dataIndex:"noticeContentZh"},{title:"英文内容",key:"noticeContentEn",dataIndex:"noticeContentEn"},{title:"截止时间",key:"endTs",dataIndex:"endTs"},{title:"操作",key:"action",scopedSlots:{customRender:"tags"}}],d={data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"notice"}),file:null,noticeList:[],editRow:{},tableHeader:c,addVisible:!1,previewVisible:!1,previewImgUrl:""}},created:function(){this.initData()},methods:{initData:function(){var e=this;Object(o.a)({url:"notice/query"}).then(function(t){var i=t.notices?t.notices:[];i=i.map(function(e){return e.key=e.id,e}),e.noticeList=i})},edit:function(e){this.editRow=e,this.addVisible=!0},del:function(e){var t=this;l.a.confirm({title:"确认删除?",content:"删除后数据不可恢复!",cancelText:"取消",okText:"确认",onOk:function(){return new a.a(function(i,n){Object(o.a)({url:"notice/delete",params:{id:e.id}}).then(function(e){200==e.code&&(t.$message.success("删除成功!"),t.initData()),i()})}).catch(function(){return console.log("Oops errors!")})},onCancel:function(){}})},showAddModal:function(){this.addVisible=!0},handleOk:function(){},handleCancel:function(){this.addVisible=!1,this.editRow={},this.form.resetFields(),this.file=null},handleSubmit:function(e){var t=this;e.preventDefault();var i=this.file;i&&i.size>1048576?this.$message.error("图片过大，请选择小于1M的图片!"):this.form.validateFields(function(e,n){if(!e){var a=Object(s.e)(n);t.file&&a.append("file",i);var r="notice/add",l="新增成功!";t.editRow.id&&(r="notice/update",a.append("id",t.editRow.id),l="修改成功!"),Object(o.a)({method:"post",url:r,params:a}).then(function(e){200==e.code&&(t.$message.success(l),t.initData(),t.handleCancel())})}})},handleChange:function(e){this.file=e.target.files[0]},beforeUpload:function(e){return!1},handlePreview:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.previewImgUrl=e,this.previewVisible=!!e}},components:{Menu:r.a}},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"curd clearfix"},[i("Menu"),e._v(" "),i("div",{staticClass:"curd_right"},[i("a-button",{attrs:{type:"primary"},on:{click:e.showAddModal}},[e._v("\n            新增\n        ")]),e._v(" "),i("a-table",{attrs:{columns:e.tableHeader,"data-source":e.noticeList},scopedSlots:e._u([{key:"name",fn:function(t){return i("a",{},[e._v(e._s(t))])}},{key:"tags",fn:function(t){return i("span",{},[i("a-tag",{attrs:{color:"green"},on:{click:function(i){return e.edit(t)}}},[e._v("修改")]),e._v(" "),i("a-tag",{attrs:{color:"red"},on:{click:function(i){return e.del(t)}}},[e._v("删除")])],1)}}])},[e._v(" "),i("span",{attrs:{slot:"customTitle"},slot:"customTitle"},[e._v("Name")])])],1),e._v(" "),i("a-modal",{attrs:{title:(e.editRow.newsNo?"修改":"新增")+"通告",visible:e.addVisible,footer:null,width:800},on:{ok:e.handleOk,cancel:e.handleCancel}},[i("a-form",{attrs:{form:e.form,"label-col":{span:5},"wrapper-col":{span:12}},on:{submit:e.handleSubmit}},[i("a-form-item",{attrs:{label:"通告标题（中文）"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["noticeTitleZh",{rules:[{required:!0,message:"请输入中文标题"}],initialValue:e.editRow.noticeTitleZh}],expression:"[\n                        'noticeTitleZh',\n                        { \n                            rules: [{ required: true, message: '请输入中文标题' }],\n                            initialValue: editRow.noticeTitleZh \n                        },\n                    ]"}]})],1),e._v(" "),i("a-form-item",{attrs:{label:"通告标题（英文）"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["noticeTitleEn",{rules:[{required:!0,message:"请输入英文标题"}],initialValue:e.editRow.noticeTitleEn}],expression:"[\n                        'noticeTitleEn',\n                        { \n                            rules: [{ required: true, message: '请输入英文标题' }],\n                            initialValue: editRow.noticeTitleEn \n                        },\n                    ]"}]})],1),e._v(" "),i("a-form-item",{attrs:{label:"报名截止时间"}},[i("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["endTs",{rules:[{required:!0,message:"请选择报名截止时间"}],initialValue:e.editRow.endTs}],expression:"[\n                        'endTs',\n                        { \n                            rules: [{ required: true, message: '请选择报名截止时间' }],\n                            initialValue: editRow.endTs\n                        },\n                    ]"}],attrs:{placeholder:"报名截止时间","show-time":"",allowClear:!0,format:"yyyy-MM-DD HH:mm:ss",valueFormat:"yyyy-MM-DD HH:mm:ss"}})],1),e._v(" "),i("a-form-item",{attrs:{label:"通告内容（中文）"}},[i("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["noticeContentZh",{rules:[{required:!0,message:"请输入中文通告内容"}],initialValue:e.editRow.noticeContentZh}],expression:"[\n                        'noticeContentZh',\n                        { \n                            rules: [{ required: true, message: '请输入中文通告内容' }],\n                            initialValue: editRow.noticeContentZh\n                        },\n                    ]"}],attrs:{autoSize:!0,allowClear:!0,placeholder:"多段数据用#分隔"}})],1),e._v(" "),i("a-form-item",{attrs:{label:"通告内容（英文）"}},[i("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["noticeContentEn",{rules:[{required:!0,message:"请输入英文通告内容"}],initialValue:e.editRow.noticeContentEn}],expression:"[\n                        'noticeContentEn',\n                        { \n                            rules: [{ required: true, message: '请输入英文通告内容' }],\n                            initialValue: editRow.noticeContentEn\n                        },\n                    ]"}],attrs:{autoSize:{minRows:2,maxRows:6},allowClear:!0,placeholder:"多段数据用#分隔"}})],1),e._v(" "),i("a-form-item",{attrs:{label:"通告图片"}},[e.editRow.noticePic?i("img",{staticClass:"news_pic",attrs:{src:e.editRow.noticePic},on:{click:function(t){return e.handlePreview(e.editRow.noticePic)}}}):e._e(),e._v(" "),i("input",{staticClass:"file_btn",attrs:{name:"file",type:"file",accept:"image/png,image/gif,image/jpeg"},on:{change:e.handleChange}})]),e._v(" "),i("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[i("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v("\n                    "+e._s(e.editRow.id?"修改":"新增")+"\n                ")])],1)],1)],1),e._v(" "),i("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:function(t){return e.handlePreview()}}},[i("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImgUrl}})])],1)},staticRenderFns:[]};var m=i("VU/8")(d,u,!1,function(e){i("bFtW")},null,null);t.default=m.exports},bFtW:function(e,t){}});